<!DOCTYPE html>
<html xmlns="http://www.w3.org/1999/xhtml" lang="en" xml:lang="en"><head>
<meta http-equiv="Content-Type" content="text/html; charset=UTF-8">
<meta charset="utf-8">
<meta name="generator" content="quarto-1.1.189">
<meta name="viewport" content="width=device-width, initial-scale=1.0, user-scalable=yes">
<title>Applied Data Skills - Appendix J — Twitter Data</title>
<style>
code{white-space: pre-wrap;}
span.smallcaps{font-variant: small-caps;}
div.columns{display: flex; gap: min(4vw, 1.5em);}
div.column{flex: auto; overflow-x: auto;}
div.hanging-indent{margin-left: 1.5em; text-indent: -1.5em;}
ul.task-list{list-style: none;}
ul.task-list li input[type="checkbox"] {
  width: 0.8em;
  margin: 0 0.8em 0.2em -1.6em;
  vertical-align: middle;
}
pre > code.sourceCode { white-space: pre; position: relative; }
pre > code.sourceCode > span { display: inline-block; line-height: 1.25; }
pre > code.sourceCode > span:empty { height: 1.2em; }
.sourceCode { overflow: visible; }
code.sourceCode > span { color: inherit; text-decoration: inherit; }
div.sourceCode { margin: 1em 0; }
pre.sourceCode { margin: 0; }
@media screen {
div.sourceCode { overflow: auto; }
}
@media print {
pre > code.sourceCode { white-space: pre-wrap; }
pre > code.sourceCode > span { text-indent: -5em; padding-left: 5em; }
}
pre.numberSource code
  { counter-reset: source-line 0; }
pre.numberSource code > span
  { position: relative; left: -4em; counter-increment: source-line; }
pre.numberSource code > span > a:first-child::before
  { content: counter(source-line);
    position: relative; left: -1em; text-align: right; vertical-align: baseline;
    border: none; display: inline-block;
    -webkit-touch-callout: none; -webkit-user-select: none;
    -khtml-user-select: none; -moz-user-select: none;
    -ms-user-select: none; user-select: none;
    padding: 0 4px; width: 4em;
    color: #aaaaaa;
  }
pre.numberSource { margin-left: 3em; border-left: 1px solid #aaaaaa;  padding-left: 4px; }
div.sourceCode
  {   }
@media screen {
pre > code.sourceCode > span > a:first-child::before { text-decoration: underline; }
}
code span.al { color: #ff0000; font-weight: bold; } /* Alert */
code span.an { color: #60a0b0; font-weight: bold; font-style: italic; } /* Annotation */
code span.at { color: #7d9029; } /* Attribute */
code span.bn { color: #40a070; } /* BaseN */
code span.bu { color: #008000; } /* BuiltIn */
code span.cf { color: #007020; font-weight: bold; } /* ControlFlow */
code span.ch { color: #4070a0; } /* Char */
code span.cn { color: #880000; } /* Constant */
code span.co { color: #60a0b0; font-style: italic; } /* Comment */
code span.cv { color: #60a0b0; font-weight: bold; font-style: italic; } /* CommentVar */
code span.do { color: #ba2121; font-style: italic; } /* Documentation */
code span.dt { color: #902000; } /* DataType */
code span.dv { color: #40a070; } /* DecVal */
code span.er { color: #ff0000; font-weight: bold; } /* Error */
code span.ex { } /* Extension */
code span.fl { color: #40a070; } /* Float */
code span.fu { color: #06287e; } /* Function */
code span.im { color: #008000; font-weight: bold; } /* Import */
code span.in { color: #60a0b0; font-weight: bold; font-style: italic; } /* Information */
code span.kw { color: #007020; font-weight: bold; } /* Keyword */
code span.op { color: #666666; } /* Operator */
code span.ot { color: #007020; } /* Other */
code span.pp { color: #bc7a00; } /* Preprocessor */
code span.sc { color: #4070a0; } /* SpecialChar */
code span.ss { color: #bb6688; } /* SpecialString */
code span.st { color: #4070a0; } /* String */
code span.va { color: #19177c; } /* Variable */
code span.vs { color: #4070a0; } /* VerbatimString */
code span.wa { color: #60a0b0; font-weight: bold; font-style: italic; } /* Warning */
</style>

<script src="site_libs/quarto-nav/quarto-nav.js"></script>
<script src="site_libs/quarto-nav/headroom.min.js"></script>
<script src="site_libs/clipboard/clipboard.min.js"></script>
<script src="site_libs/quarto-search/autocomplete.umd.js"></script>
<script src="site_libs/quarto-search/fuse.min.js"></script>
<script src="site_libs/quarto-search/quarto-search.js"></script>
<meta name="quarto:offset" content="./">
<link href="./appendix-k-spotify.html" rel="next">
<link href="./appendix-i-hashtags.html" rel="prev">
<script src="site_libs/quarto-html/quarto.js"></script>
<script src="site_libs/quarto-html/popper.min.js"></script>
<script src="site_libs/quarto-html/tippy.umd.min.js"></script>
<script src="site_libs/quarto-html/anchor.min.js"></script>
<link href="site_libs/quarto-html/tippy.css" rel="stylesheet">
<link href="site_libs/quarto-html/quarto-syntax-highlighting.css" rel="stylesheet" class="quarto-color-scheme" id="quarto-text-highlighting-styles">
<link href="site_libs/quarto-html/quarto-syntax-highlighting-dark.css" rel="prefetch" class="quarto-color-scheme quarto-color-alternate" id="quarto-text-highlighting-styles">
<script src="site_libs/bootstrap/bootstrap.min.js"></script>
<link href="site_libs/bootstrap/bootstrap-icons.css" rel="stylesheet">
<link href="site_libs/bootstrap/bootstrap.min.css" rel="stylesheet" class="quarto-color-scheme" id="quarto-bootstrap" data-mode="light">
<link href="site_libs/bootstrap/bootstrap-dark.min.css" rel="prefetch" class="quarto-color-scheme quarto-color-alternate" id="quarto-bootstrap" data-mode="dark"><script id="quarto-search-options" type="application/json">{
  "location": "sidebar",
  "copy-button": false,
  "collapse-after": 3,
  "panel-placement": "start",
  "type": "textbox",
  "limit": 20,
  "language": {
    "search-no-results-text": "No results",
    "search-matching-documents-text": "matching documents",
    "search-copy-link-title": "Copy link to search",
    "search-hide-matches-text": "Hide additional matches",
    "search-more-match-text": "more match in this document",
    "search-more-matches-text": "more matches in this document",
    "search-clear-button-title": "Clear",
    "search-detached-cancel-button-title": "Cancel",
    "search-submit-button-title": "Submit"
  }
}</script><script async="" src="https://www.googletagmanager.com/gtag/js?id=G-6NP3MF25W3"></script><script type="text/javascript">

window.dataLayer = window.dataLayer || [];
function gtag(){dataLayer.push(arguments);}
gtag('js', new Date());
gtag('config', 'G-6NP3MF25W3', { 'anonymize_ip': true});
</script><link rel="stylesheet" href="include/psyteachr.css">
<link rel="stylesheet" href="include/webex.css">
<link rel="stylesheet" href="include/style.css">
</head>
<body class="nav-sidebar floating">

<div id="quarto-search-results"></div>
  <header id="quarto-header" class="headroom fixed-top"><nav class="quarto-secondary-nav" data-bs-toggle="collapse" data-bs-target="#quarto-sidebar" aria-controls="quarto-sidebar" aria-expanded="false" aria-label="Toggle sidebar navigation" onclick="if (window.quartoToggleHeadroom) { window.quartoToggleHeadroom(); }"><div class="container-fluid d-flex justify-content-between">
      <h1 class="quarto-secondary-nav-title">Appendix J — Twitter Data</h1>
      <button type="button" class="quarto-btn-toggle btn" aria-label="Show secondary navigation">
        <i class="bi bi-chevron-right"></i>
      </button>
    </div>
  </nav></header><!-- content --><div id="quarto-content" class="quarto-container page-columns page-rows-contents page-layout-article">
<!-- sidebar -->
  <nav id="quarto-sidebar" class="sidebar collapse sidebar-navigation floating overflow-auto"><div class="pt-lg-2 mt-2 text-left sidebar-header">
    <div class="sidebar-title mb-0 py-0">
      <a href="./">Applied Data Skills</a> 
        <div class="sidebar-tools-main tools-wide">
    <a href="https://github.com/psyteachr/ads-v2/" title="Source Code" class="sidebar-tool px-1"><i class="bi bi-github"></i></a>
    <a href="" title="Share" id="sidebar-tool-dropdown-0" class="sidebar-tool dropdown-toggle px-1" data-bs-toggle="dropdown" aria-expanded="false"><i class="bi bi-share"></i></a>
    <ul class="dropdown-menu" aria-labelledby="sidebar-tool-dropdown-0">
<li>
          <a class="dropdown-item sidebar-tools-main-item" href="https://twitter.com/intent/tweet?url=%7Curl%7C">
            <i class="bi bi-bi-twitter pe-1"></i>
          Twitter
          </a>
        </li>
        <li>
          <a class="dropdown-item sidebar-tools-main-item" href="https://www.facebook.com/sharer/sharer.php?u=%7Curl%7C">
            <i class="bi bi-bi-facebook pe-1"></i>
          Facebook
          </a>
        </li>
        <li>
          <a class="dropdown-item sidebar-tools-main-item" href="https://www.linkedin.com/sharing/share-offsite/?url=%7Curl%7C">
            <i class="bi bi-bi-linkedin pe-1"></i>
          LinkedIn
          </a>
        </li>
    </ul>
<a href="" class="quarto-color-scheme-toggle sidebar-tool" onclick="window.quartoToggleColorScheme(); return false;" title="Toggle dark mode"><i class="bi"></i></a>
</div>
    </div>
      </div>
      <div class="mt-2 flex-shrink-0 align-items-center">
        <div class="sidebar-search">
        <div id="quarto-search" class="" title="Search"></div>
        </div>
      </div>
    <div class="sidebar-menu-container"> 
    <ul class="list-unstyled mt-1">
<li class="sidebar-item">
  <div class="sidebar-item-container"> 
  <a href="./index.html" class="sidebar-item-text sidebar-link">Overview</a>
  </div>
</li>
        <li class="sidebar-item">
  <div class="sidebar-item-container"> 
  <a href="./01-intro.html" class="sidebar-item-text sidebar-link"><span class="chapter-number">1</span>&nbsp; <span class="chapter-title">Intro to R and RStudio</span></a>
  </div>
</li>
        <li class="sidebar-item">
  <div class="sidebar-item-container"> 
  <a href="./02-reports.html" class="sidebar-item-text sidebar-link"><span class="chapter-number">2</span>&nbsp; <span class="chapter-title">Reports with R Markdown</span></a>
  </div>
</li>
        <li class="sidebar-item">
  <div class="sidebar-item-container"> 
  <a href="./03-viz.html" class="sidebar-item-text sidebar-link"><span class="chapter-number">3</span>&nbsp; <span class="chapter-title">Data Visualisation</span></a>
  </div>
</li>
        <li class="sidebar-item">
  <div class="sidebar-item-container"> 
  <a href="./04-data.html" class="sidebar-item-text sidebar-link"><span class="chapter-number">4</span>&nbsp; <span class="chapter-title">Data Import</span></a>
  </div>
</li>
        <li class="sidebar-item">
  <div class="sidebar-item-container"> 
  <a href="./05-summary.html" class="sidebar-item-text sidebar-link"><span class="chapter-number">5</span>&nbsp; <span class="chapter-title">Data Summaries</span></a>
  </div>
</li>
        <li class="sidebar-item">
  <div class="sidebar-item-container"> 
  <a href="./06-formative.html" class="sidebar-item-text sidebar-link"><span class="chapter-number">6</span>&nbsp; <span class="chapter-title">Practice Report</span></a>
  </div>
</li>
        <li class="sidebar-item">
  <div class="sidebar-item-container"> 
  <a href="./07-joins.html" class="sidebar-item-text sidebar-link"><span class="chapter-number">7</span>&nbsp; <span class="chapter-title">Data Relations</span></a>
  </div>
</li>
        <li class="sidebar-item">
  <div class="sidebar-item-container"> 
  <a href="./08-tidy.html" class="sidebar-item-text sidebar-link"><span class="chapter-number">8</span>&nbsp; <span class="chapter-title">Data Tidying</span></a>
  </div>
</li>
        <li class="sidebar-item">
  <div class="sidebar-item-container"> 
  <a href="./09-wrangle.html" class="sidebar-item-text sidebar-link"><span class="chapter-number">9</span>&nbsp; <span class="chapter-title">Data Wrangling</span></a>
  </div>
</li>
        <li class="sidebar-item">
  <div class="sidebar-item-container"> 
  <a href="./10-custom.html" class="sidebar-item-text sidebar-link"><span class="chapter-number">10</span>&nbsp; <span class="chapter-title">Customising Visualisations &amp; Reports</span></a>
  </div>
</li>
        <li class="sidebar-item">
  <div class="sidebar-item-container"> 
  <a href="./11-refs.html" class="sidebar-item-text sidebar-link">References</a>
  </div>
</li>
        <li class="sidebar-item">
  <div class="sidebar-item-container"> 
  <a href="./12-license.html" class="sidebar-item-text sidebar-link">License/Citation</a>
  </div>
</li>
        <li class="sidebar-item sidebar-item-section">
      <div class="sidebar-item-container"> 
            <a class="sidebar-item-text sidebar-link text-start" data-bs-toggle="collapse" data-bs-target="#quarto-sidebar-section-1" aria-expanded="true">Appendices</a>
          <a class="sidebar-item-toggle text-start" data-bs-toggle="collapse" data-bs-target="#quarto-sidebar-section-1" aria-expanded="true">
            <i class="bi bi-chevron-right ms-2"></i>
          </a> 
      </div>
      <ul id="quarto-sidebar-section-1" class="collapse list-unstyled sidebar-section depth1 show">
<li class="sidebar-item">
  <div class="sidebar-item-container"> 
  <a href="./appendix-a-installing-r.html" class="sidebar-item-text sidebar-link"><span class="chapter-number">A</span>&nbsp; <span class="chapter-title">Installing R</span></a>
  </div>
</li>
          <li class="sidebar-item">
  <div class="sidebar-item-container"> 
  <a href="./appendix-b-updating-r.html" class="sidebar-item-text sidebar-link"><span class="chapter-number">B</span>&nbsp; <span class="chapter-title">Updating R, RStudio, and packages</span></a>
  </div>
</li>
          <li class="sidebar-item">
  <div class="sidebar-item-container"> 
  <a href="./appendix-c-symbols.html" class="sidebar-item-text sidebar-link"><span class="chapter-number">C</span>&nbsp; <span class="chapter-title">Symbols</span></a>
  </div>
</li>
          <li class="sidebar-item">
  <div class="sidebar-item-container"> 
  <a href="./appendix-d-conventions.html" class="sidebar-item-text sidebar-link"><span class="chapter-number">D</span>&nbsp; <span class="chapter-title">Conventions</span></a>
  </div>
</li>
          <li class="sidebar-item">
  <div class="sidebar-item-container"> 
  <a href="./appendix-e-teams.html" class="sidebar-item-text sidebar-link"><span class="chapter-number">E</span>&nbsp; <span class="chapter-title">Using Teams</span></a>
  </div>
</li>
          <li class="sidebar-item">
  <div class="sidebar-item-container"> 
  <a href="./appendix-f-datatypes.html" class="sidebar-item-text sidebar-link"><span class="chapter-number">F</span>&nbsp; <span class="chapter-title">Data Types</span></a>
  </div>
</li>
          <li class="sidebar-item">
  <div class="sidebar-item-container"> 
  <a href="./appendix-g-dates.html" class="sidebar-item-text sidebar-link"><span class="chapter-number">G</span>&nbsp; <span class="chapter-title">Dates and Times</span></a>
  </div>
</li>
          <li class="sidebar-item">
  <div class="sidebar-item-container"> 
  <a href="./appendix-h-styling.html" class="sidebar-item-text sidebar-link"><span class="chapter-number">H</span>&nbsp; <span class="chapter-title">Styling Plots</span></a>
  </div>
</li>
          <li class="sidebar-item">
  <div class="sidebar-item-container"> 
  <a href="./appendix-i-hashtags.html" class="sidebar-item-text sidebar-link"><span class="chapter-number">I</span>&nbsp; <span class="chapter-title">Twitter Hashtags</span></a>
  </div>
</li>
          <li class="sidebar-item">
  <div class="sidebar-item-container"> 
  <a href="./appendix-j-twitter.html" class="sidebar-item-text sidebar-link active"><span class="chapter-number">J</span>&nbsp; <span class="chapter-title">Twitter Data</span></a>
  </div>
</li>
          <li class="sidebar-item">
  <div class="sidebar-item-container"> 
  <a href="./appendix-k-spotify.html" class="sidebar-item-text sidebar-link"><span class="chapter-number">K</span>&nbsp; <span class="chapter-title">Spotify Data</span></a>
  </div>
</li>
          <li class="sidebar-item">
  <div class="sidebar-item-container"> 
  <a href="./appendix-l-webpage.html" class="sidebar-item-text sidebar-link"><span class="chapter-number">L</span>&nbsp; <span class="chapter-title">Webpages</span></a>
  </div>
</li>
      </ul>
</li>
    </ul>
</div>
</nav><!-- margin-sidebar --><div id="quarto-margin-sidebar" class="sidebar margin-sidebar"><div class="quarto-margin-header"><div class="margin-header-item">
<p><a href="https://doi.org/10.5281/zenodo.6365077"><img src="https://zenodo.org/badge/DOI/10.5281/zenodo.6365077.svg" alt="DOI"></a></p>
</div></div>
        <nav id="TOC" role="doc-toc" class="toc-active"><h2 id="toc-title">Table of contents</h2>
   
  <ul>
<li>
<a href="#single-data-file" id="toc-single-data-file" class="nav-link active" data-scroll-target="#single-data-file"><span class="toc-section-number">J.1</span>  Single Data File</a>
  <ul class="collapse">
<li><a href="#export-data" id="toc-export-data" class="nav-link" data-scroll-target="#export-data"><span class="toc-section-number">J.1.1</span>  Export Data</a></li>
  <li><a href="#import-data" id="toc-import-data" class="nav-link" data-scroll-target="#import-data"><span class="toc-section-number">J.1.2</span>  Import Data</a></li>
  <li><a href="#select-relevant-data" id="toc-select-relevant-data" class="nav-link" data-scroll-target="#select-relevant-data"><span class="toc-section-number">J.1.3</span>  Select Relevant Data</a></li>
  <li><a href="#plot-likes-per-day" id="toc-plot-likes-per-day" class="nav-link" data-scroll-target="#plot-likes-per-day"><span class="toc-section-number">J.1.4</span>  Plot Likes per Day</a></li>
  <li><a href="#plot-multiple-engagements" id="toc-plot-multiple-engagements" class="nav-link" data-scroll-target="#plot-multiple-engagements"><span class="toc-section-number">J.1.5</span>  Plot Multiple Engagements</a></li>
  </ul>
</li>
  <li>
<a href="#multiple-data-files" id="toc-multiple-data-files" class="nav-link" data-scroll-target="#multiple-data-files"><span class="toc-section-number">J.2</span>  Multiple Data Files</a>
  <ul class="collapse">
<li><a href="#likes-by-month" id="toc-likes-by-month" class="nav-link" data-scroll-target="#likes-by-month"><span class="toc-section-number">J.2.1</span>  Likes by Month</a></li>
  </ul>
</li>
  <li>
<a href="#data-by-tweet" id="toc-data-by-tweet" class="nav-link" data-scroll-target="#data-by-tweet"><span class="toc-section-number">J.3</span>  Data by Tweet</a>
  <ul class="collapse">
<li><a href="#impressions-per-tweet" id="toc-impressions-per-tweet" class="nav-link" data-scroll-target="#impressions-per-tweet"><span class="toc-section-number">J.3.1</span>  Impressions per Tweet</a></li>
  <li><a href="#top-tweet" id="toc-top-tweet" class="nav-link" data-scroll-target="#top-tweet"><span class="toc-section-number">J.3.2</span>  Top Tweet</a></li>
  <li><a href="#word-cloud" id="toc-word-cloud" class="nav-link" data-scroll-target="#word-cloud"><span class="toc-section-number">J.3.3</span>  Word Cloud</a></li>
  <li><a href="#tweets-by-hour" id="toc-tweets-by-hour" class="nav-link" data-scroll-target="#tweets-by-hour"><span class="toc-section-number">J.3.4</span>  Tweets by Hour</a></li>
  </ul>
</li>
  </ul><div class="toc-actions"><div><i class="bi bi-github"></i></div><div class="action-links"><p><a href="https://github.com/psyteachr/ads-v2/edit/master/appendix-j-twitter.qmd" class="toc-action">Edit this page</a></p><p><a href="https://github.com/psyteachr/ads-v2/issues/new" class="toc-action">Report an issue</a></p><p><a href="https://github.com/psyteachr/ads-v2/blob/master/appendix-j-twitter.qmd" class="toc-action">View source</a></p></div></div></nav>
    </div>
<!-- main -->
<main class="content" id="quarto-document-content"><header id="title-block-header" class="quarto-title-block default"><div class="quarto-title">
<h1 class="title"><span id="sec-twitter-data" class="quarto-section-identifier d-none d-lg-block">Appendix J — Twitter Data</span></h1>
</div>



<div class="quarto-title-meta">

    
    
  </div>
  

</header><p>This appendix takes a problem-based approach to demonstrate how to use tidyverse functions to summarise and visualise twitter data.</p>
<div class="cell" data-layout-align="center">
<div class="sourceCode cell-code" id="cb1"><pre class="sourceCode numberSource r number-lines code-with-copy"><code class="sourceCode r"><span id="cb1-1"><a href="#cb1-1"></a><span class="fu">library</span>(tidyverse)   <span class="co"># data wrangling functions</span></span>
<span id="cb1-2"><a href="#cb1-2"></a><span class="fu">library</span>(lubridate)   <span class="co"># for handling dates and times</span></span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
</div>
<section id="single-data-file" class="level2" data-number="J.1"><h2 data-number="J.1" class="anchored" data-anchor-id="single-data-file">
<span class="header-section-number">J.1</span> Single Data File</h2>
<section id="export-data" class="level3" data-number="J.1.1"><h3 data-number="J.1.1" class="anchored" data-anchor-id="export-data">
<span class="header-section-number">J.1.1</span> Export Data</h3>
<p>You can export your organisations’ twitter data from <a href="https://analytics.twitter.com/" class="uri">https://analytics.twitter.com/</a>. Go to the Tweets tab, choose a time period, and export the last month’s data by day (or use the files from the <a href="data/data.zip">class data</a>).</p>
</section><section id="import-data" class="level3" data-number="J.1.2"><h3 data-number="J.1.2" class="anchored" data-anchor-id="import-data">
<span class="header-section-number">J.1.2</span> Import Data</h3>
<div class="cell" data-layout-align="center">
<div class="sourceCode cell-code" id="cb2"><pre class="sourceCode numberSource r number-lines code-with-copy"><code class="sourceCode r"><span id="cb2-1"><a href="#cb2-1"></a>file <span class="ot">&lt;-</span> <span class="st">"data/tweets/daily_tweet_activity_metrics_LisaDeBruine_20210801_20210901_en.csv"</span></span>
<span id="cb2-2"><a href="#cb2-2"></a></span>
<span id="cb2-3"><a href="#cb2-3"></a>daily_tweets <span class="ot">&lt;-</span> <span class="fu">read_csv</span>(file, <span class="at">show_col_types =</span> <span class="cn">FALSE</span>)</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
</div>
</section><section id="select-relevant-data" class="level3" data-number="J.1.3"><h3 data-number="J.1.3" class="anchored" data-anchor-id="select-relevant-data">
<span class="header-section-number">J.1.3</span> Select Relevant Data</h3>
<p>The file contains a bunch of columns about “promoted” tweets that will be blank unless your organisation pays for those. Let’s get rid of them. We can use the select helper <code>starts_with()</code> to get all the columns that start with <code><span><span class="st">“promoted”</span></span></code> and remove them by prefacing the function with <code>!</code>. Now there should be 20 columns, which we can inspect with <code>glimpse()</code>.</p>
<div class="cell" data-layout-align="center">
<div class="sourceCode cell-code" id="cb3"><pre class="sourceCode numberSource r number-lines code-with-copy"><code class="sourceCode r"><span id="cb3-1"><a href="#cb3-1"></a>daily_tweets <span class="ot">&lt;-</span> <span class="fu">read_csv</span>(file) <span class="sc">%&gt;%</span></span>
<span id="cb3-2"><a href="#cb3-2"></a>  <span class="fu">select</span>(<span class="sc">!</span><span class="fu">starts_with</span>(<span class="st">"promoted"</span>)) <span class="sc">%&gt;%</span></span>
<span id="cb3-3"><a href="#cb3-3"></a>  <span class="fu">glimpse</span>()</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output cell-output-stdout">
<pre><code>Rows: 31
Columns: 20
$ Date                  &lt;date&gt; 2021-08-01, 2021-08-02, 2021-08-03, 2021-08-04,…
$ `Tweets published`    &lt;dbl&gt; 0, 2, 4, 15, 12, 11, 14, 17, 26, 17, 3, 9, 5, 17…
$ impressions           &lt;dbl&gt; 1088, 1244, 3974, 22394, 23340, 316989, 694114, …
$ engagements           &lt;dbl&gt; 13, 19, 76, 1290, 2051, 26249, 51494, 5988, 2964…
$ `engagement rate`     &lt;dbl&gt; 0.01194853, 0.01527331, 0.01912431, 0.05760472, …
$ retweets              &lt;dbl&gt; 0, 0, 0, 5, 15, 124, 130, 18, 13, 4, 2, 25, 1, 7…
$ replies               &lt;dbl&gt; 0, 2, 5, 15, 16, 122, 123, 21, 52, 21, 4, 11, 9,…
$ likes                 &lt;dbl&gt; 2, 3, 25, 96, 108, 628, 847, 93, 116, 68, 10, 10…
$ `user profile clicks` &lt;dbl&gt; 1, 9, 10, 56, 36, 379, 550, 98, 78, 31, 17, 104,…
$ `url clicks`          &lt;dbl&gt; 2, 0, 0, 45, 97, 10136, 19467, 1937, 681, 324, 1…
$ `hashtag clicks`      &lt;dbl&gt; 0, 0, 0, 0, 0, 0, 1, 5, 1, 0, 0, 12, 1, 2, 3, 1,…
$ `detail expands`      &lt;dbl&gt; 7, 5, 36, 412, 606, 10348, 21021, 2642, 1441, 79…
$ `permalink clicks`    &lt;dbl&gt; 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, …
$ `app opens`           &lt;dbl&gt; 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, …
$ `app installs`        &lt;dbl&gt; 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, …
$ follows               &lt;dbl&gt; 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, …
$ `email tweet`         &lt;dbl&gt; 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, …
$ `dial phone`          &lt;dbl&gt; 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, …
$ `media views`         &lt;dbl&gt; 2, 2, 25, 710, 1187, 4474, 9356, 1176, 582, 334,…
$ `media engagements`   &lt;dbl&gt; 1, 0, 0, 661, 1173, 4464, 9353, 1174, 582, 327, …</code></pre>
</div>
</div>
</section><section id="plot-likes-per-day" class="level3" data-number="J.1.4"><h3 data-number="J.1.4" class="anchored" data-anchor-id="plot-likes-per-day">
<span class="header-section-number">J.1.4</span> Plot Likes per Day</h3>
<p>Now let’s plot likes per day. The <code>scale_x_date()</code> function lets you formats an x-axis with dates.</p>
<div class="cell" data-layout-align="center">
<div class="sourceCode cell-code" id="cb5"><pre class="sourceCode numberSource r number-lines code-with-copy"><code class="sourceCode r"><span id="cb5-1"><a href="#cb5-1"></a><span class="fu">ggplot</span>(daily_tweets, <span class="fu">aes</span>(<span class="at">x =</span> Date, <span class="at">y =</span> likes)) <span class="sc">+</span></span>
<span id="cb5-2"><a href="#cb5-2"></a>  <span class="fu">geom_line</span>() <span class="sc">+</span></span>
<span id="cb5-3"><a href="#cb5-3"></a>  <span class="fu">scale_x_date</span>(<span class="at">name =</span> <span class="st">""</span>, </span>
<span id="cb5-4"><a href="#cb5-4"></a>               <span class="at">date_breaks =</span> <span class="st">"1 day"</span>,</span>
<span id="cb5-5"><a href="#cb5-5"></a>               <span class="at">date_labels =</span> <span class="st">"%d"</span>,</span>
<span id="cb5-6"><a href="#cb5-6"></a>               <span class="at">expand =</span> <span class="fu">expansion</span>(<span class="at">add =</span> <span class="fu">c</span>(.<span class="dv">5</span>, .<span class="dv">5</span>))) <span class="sc">+</span></span>
<span id="cb5-7"><a href="#cb5-7"></a>  <span class="fu">ggtitle</span>(<span class="st">"Likes: August 2021"</span>)</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output-display">
<div class="quarto-figure quarto-figure-center">
<figure class="figure"><p><img src="appendix-j-twitter_files/figure-html/likes-per-day-plot-1.png" class="img-fluid figure-img" style="width:100.0%"></p>
<p></p><figcaption class="figure-caption">Likes per day.</figcaption><p></p>
</figure>
</div>
</div>
</div>
</section><section id="plot-multiple-engagements" class="level3" data-number="J.1.5"><h3 data-number="J.1.5" class="anchored" data-anchor-id="plot-multiple-engagements">
<span class="header-section-number">J.1.5</span> Plot Multiple Engagements</h3>
<p>What if we want to plot likes, retweets, and replies on the same plot? We need to get all of the numbers in the same column and a column that contains the “engagement type” that we can use to determine different line colours. When you have data in different columns that you need to get into the same column, it’s wide and you need to pivot the data longer.</p>
<div class="cell" data-layout-align="center">
<div class="sourceCode cell-code" id="cb6"><pre class="sourceCode numberSource r number-lines code-with-copy"><code class="sourceCode r"><span id="cb6-1"><a href="#cb6-1"></a>long_tweets <span class="ot">&lt;-</span> daily_tweets <span class="sc">%&gt;%</span></span>
<span id="cb6-2"><a href="#cb6-2"></a>  <span class="fu">select</span>(Date, likes, retweets, replies) <span class="sc">%&gt;%</span></span>
<span id="cb6-3"><a href="#cb6-3"></a>  <span class="fu">pivot_longer</span>(<span class="at">cols =</span> <span class="fu">c</span>(likes, retweets, replies),</span>
<span id="cb6-4"><a href="#cb6-4"></a>               <span class="at">names_to =</span> <span class="st">"engage_type"</span>,</span>
<span id="cb6-5"><a href="#cb6-5"></a>               <span class="at">values_to =</span> <span class="st">"n"</span>)</span>
<span id="cb6-6"><a href="#cb6-6"></a></span>
<span id="cb6-7"><a href="#cb6-7"></a><span class="fu">head</span>(long_tweets)</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output-display">
<div class="kable-table">

<table>
<thead><tr>
<th style="text-align:left;">
Date
</th>
<th style="text-align:left;">
engage_type
</th>
<th style="text-align:right;">
n
</th>
</tr></thead>
<tbody>
<tr>
<td style="text-align:left;">
2021-08-01
</td>
<td style="text-align:left;">
likes
</td>
<td style="text-align:right;">
2
</td>
</tr>
<tr>
<td style="text-align:left;">
2021-08-01
</td>
<td style="text-align:left;">
retweets
</td>
<td style="text-align:right;">
0
</td>
</tr>
<tr>
<td style="text-align:left;">
2021-08-01
</td>
<td style="text-align:left;">
replies
</td>
<td style="text-align:right;">
0
</td>
</tr>
<tr>
<td style="text-align:left;">
2021-08-02
</td>
<td style="text-align:left;">
likes
</td>
<td style="text-align:right;">
3
</td>
</tr>
<tr>
<td style="text-align:left;">
2021-08-02
</td>
<td style="text-align:left;">
retweets
</td>
<td style="text-align:right;">
0
</td>
</tr>
<tr>
<td style="text-align:left;">
2021-08-02
</td>
<td style="text-align:left;">
replies
</td>
<td style="text-align:right;">
2
</td>
</tr>
</tbody>
</table>
</div>
</div>
</div>
<p>Now we can plot the number of engagements per day by engagement type by making the line colour determined by the value of the <code>engage_type</code> column.</p>
<div class="cell" data-layout-align="center">
<div class="sourceCode cell-code" id="cb7"><pre class="sourceCode numberSource r number-lines code-with-copy"><code class="sourceCode r"><span id="cb7-1"><a href="#cb7-1"></a><span class="fu">ggplot</span>(long_tweets, <span class="fu">aes</span>(<span class="at">x =</span> Date, <span class="at">y =</span> n, <span class="at">colour =</span> engage_type)) <span class="sc">+</span></span>
<span id="cb7-2"><a href="#cb7-2"></a>  <span class="fu">geom_line</span>() <span class="sc">+</span></span>
<span id="cb7-3"><a href="#cb7-3"></a>  <span class="fu">scale_x_date</span>(<span class="at">name =</span> <span class="st">""</span>, </span>
<span id="cb7-4"><a href="#cb7-4"></a>               <span class="at">date_breaks =</span> <span class="st">"1 day"</span>,</span>
<span id="cb7-5"><a href="#cb7-5"></a>               <span class="at">date_labels =</span> <span class="st">"%d"</span>,</span>
<span id="cb7-6"><a href="#cb7-6"></a>               <span class="at">expand =</span> <span class="fu">expansion</span>(<span class="at">add =</span> <span class="fu">c</span>(.<span class="dv">5</span>, .<span class="dv">5</span>))) <span class="sc">+</span></span>
<span id="cb7-7"><a href="#cb7-7"></a>  <span class="fu">scale_y_continuous</span>(<span class="at">name =</span> <span class="st">"Engagements per Day"</span>) <span class="sc">+</span> </span>
<span id="cb7-8"><a href="#cb7-8"></a>  <span class="fu">scale_colour_discrete</span>(<span class="at">name =</span> <span class="st">""</span>) <span class="sc">+</span></span>
<span id="cb7-9"><a href="#cb7-9"></a>  <span class="fu">ggtitle</span>(<span class="st">"August 2021"</span>) <span class="sc">+</span></span>
<span id="cb7-10"><a href="#cb7-10"></a>  <span class="fu">theme</span>(<span class="at">legend.position =</span> <span class="fu">c</span>(.<span class="dv">9</span>, .<span class="dv">8</span>),</span>
<span id="cb7-11"><a href="#cb7-11"></a>        <span class="at">panel.grid.minor =</span> <span class="fu">element_blank</span>())</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output-display">
<div class="quarto-figure quarto-figure-center">
<figure class="figure"><p><img src="appendix-j-twitter_files/figure-html/eng-per-day-plot-1.png" class="img-fluid figure-img" style="width:100.0%"></p>
<p></p><figcaption class="figure-caption">Engagements per day by engagement type.</figcaption><p></p>
</figure>
</div>
</div>
</div>
</section></section><section id="multiple-data-files" class="level2" data-number="J.2"><h2 data-number="J.2" class="anchored" data-anchor-id="multiple-data-files">
<span class="header-section-number">J.2</span> Multiple Data Files</h2>
<p>Maybe now you want to compare the data from several months. First, get a list of all the files you want to combine. It’s easiest if they’re all in the same directory, although you can use a pattern to select the files you want if they have a systematic naming structure.</p>
<div class="cell" data-layout-align="center">
<div class="sourceCode cell-code" id="cb8"><pre class="sourceCode numberSource r number-lines code-with-copy"><code class="sourceCode r"><span id="cb8-1"><a href="#cb8-1"></a>files <span class="ot">&lt;-</span> <span class="fu">list.files</span>(</span>
<span id="cb8-2"><a href="#cb8-2"></a>  <span class="at">path =</span> <span class="st">"data/tweets"</span>, </span>
<span id="cb8-3"><a href="#cb8-3"></a>  <span class="at">pattern =</span> <span class="st">"daily_tweet_activity_metrics"</span>,</span>
<span id="cb8-4"><a href="#cb8-4"></a>  <span class="at">full.names =</span> <span class="cn">TRUE</span></span>
<span id="cb8-5"><a href="#cb8-5"></a>)</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
</div>
<p>Then use <code>map_df()</code> to iterate over the list of file paths, open them with <code>read_csv()</code>, and return a big data frame with all the combined data. Then we can pipe that to the <code>select()</code> function to get rid of the “promoted” columns.</p>
<div class="cell" data-layout-align="center">
<div class="sourceCode cell-code" id="cb9"><pre class="sourceCode numberSource r number-lines code-with-copy"><code class="sourceCode r"><span id="cb9-1"><a href="#cb9-1"></a>all_daily_tweets <span class="ot">&lt;-</span> purrr<span class="sc">::</span><span class="fu">map_df</span>(files, read_csv) <span class="sc">%&gt;%</span></span>
<span id="cb9-2"><a href="#cb9-2"></a>  <span class="fu">select</span>(<span class="sc">!</span><span class="fu">starts_with</span>(<span class="st">"promoted"</span>))</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
</div>
<p>Now you can make a plot of likes per day for all of the months.</p>
<div class="cell" data-layout-align="center">
<div class="sourceCode cell-code" id="cb10"><pre class="sourceCode numberSource r number-lines code-with-copy"><code class="sourceCode r"><span id="cb10-1"><a href="#cb10-1"></a><span class="fu">ggplot</span>(all_daily_tweets, <span class="fu">aes</span>(<span class="at">x =</span> Date, <span class="at">y =</span> likes)) <span class="sc">+</span></span>
<span id="cb10-2"><a href="#cb10-2"></a>  <span class="fu">geom_line</span>(<span class="at">colour =</span> <span class="st">"dodgerblue"</span>) <span class="sc">+</span></span>
<span id="cb10-3"><a href="#cb10-3"></a>  <span class="fu">scale_y_continuous</span>(<span class="at">name =</span> <span class="st">"Likes per Day"</span>) <span class="sc">+</span> </span>
<span id="cb10-4"><a href="#cb10-4"></a>  <span class="fu">scale_x_date</span>(<span class="at">name =</span> <span class="st">""</span>, </span>
<span id="cb10-5"><a href="#cb10-5"></a>               <span class="at">date_breaks =</span> <span class="st">"1 month"</span>,</span>
<span id="cb10-6"><a href="#cb10-6"></a>               <span class="at">date_labels =</span> <span class="st">"%B"</span>,</span>
<span id="cb10-7"><a href="#cb10-7"></a>               <span class="at">expand =</span> <span class="fu">expansion</span>(<span class="at">add =</span> <span class="fu">c</span>(.<span class="dv">5</span>, .<span class="dv">5</span>))) <span class="sc">+</span></span>
<span id="cb10-8"><a href="#cb10-8"></a>  <span class="fu">ggtitle</span>(<span class="st">"Likes 2021"</span>)</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output-display">
<div class="quarto-figure quarto-figure-center">
<figure class="figure"><p><img src="appendix-j-twitter_files/figure-html/unnamed-chunk-6-1.png" class="img-fluid figure-img" style="width:100.0%"></p>
</figure>
</div>
</div>
</div>
<div class="callout-note callout callout-style-default callout-captioned">
<div class="callout-header d-flex align-content-center">
<div class="callout-icon-container">
<i class="callout-icon"></i>
</div>
<div class="callout-caption-container flex-fill">
Note
</div>
</div>
<div class="callout-body-container callout-body">
<p>Notice that we changed the date breaks and labels for the x-axis. <code>%B</code> is the date code for the full month name. See <code><a href="https://rdrr.io/r/base/strptime.html">?strptime</a></code> for all of the date codes.</p>
</div>
</div>
<section id="likes-by-month" class="level3" data-number="J.2.1"><h3 data-number="J.2.1" class="anchored" data-anchor-id="likes-by-month">
<span class="header-section-number">J.2.1</span> Likes by Month</h3>
<p>If you want to plot likes by month, first you need a column for the month. Use <code>mutate()</code> to make a new column, using <code><a href="https://lubridate.tidyverse.org/reference/month.html">lubridate::month()</a></code> to extract the month name from the <code>Date</code> column.</p>
<p>Then group by the new <code>month</code> column and calculate the sum of <code>likes</code>. The <code>group_by()</code> function causes all of the subsequent functions to operate inside of groups, until you call <code>ungroup()</code>. In the example below, the <code>sum(likes)</code> function calculates the sum total of the <code>likes</code> column separately for each month.</p>
<div class="cell" data-layout-align="center">
<div class="sourceCode cell-code" id="cb11"><pre class="sourceCode numberSource r number-lines code-with-copy"><code class="sourceCode r"><span id="cb11-1"><a href="#cb11-1"></a>likes_by_month <span class="ot">&lt;-</span> all_daily_tweets <span class="sc">%&gt;%</span></span>
<span id="cb11-2"><a href="#cb11-2"></a>  <span class="fu">mutate</span>(<span class="at">month =</span> <span class="fu">month</span>(Date, <span class="at">label =</span> <span class="cn">TRUE</span>)) <span class="sc">%&gt;%</span></span>
<span id="cb11-3"><a href="#cb11-3"></a>  <span class="fu">group_by</span>(month) <span class="sc">%&gt;%</span></span>
<span id="cb11-4"><a href="#cb11-4"></a>  <span class="fu">summarise</span>(<span class="at">total_likes =</span> <span class="fu">sum</span>(likes)) <span class="sc">%&gt;%</span></span>
<span id="cb11-5"><a href="#cb11-5"></a>  <span class="fu">ungroup</span>()</span>
<span id="cb11-6"><a href="#cb11-6"></a></span>
<span id="cb11-7"><a href="#cb11-7"></a>likes_by_month</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output-display">
<div class="kable-table">

<table>
<thead><tr>
<th style="text-align:left;">
month
</th>
<th style="text-align:right;">
total_likes
</th>
</tr></thead>
<tbody>
<tr>
<td style="text-align:left;">
Jan
</td>
<td style="text-align:right;">
1981
</td>
</tr>
<tr>
<td style="text-align:left;">
Feb
</td>
<td style="text-align:right;">
1603
</td>
</tr>
<tr>
<td style="text-align:left;">
Mar
</td>
<td style="text-align:right;">
2238
</td>
</tr>
<tr>
<td style="text-align:left;">
Apr
</td>
<td style="text-align:right;">
2912
</td>
</tr>
<tr>
<td style="text-align:left;">
May
</td>
<td style="text-align:right;">
2083
</td>
</tr>
<tr>
<td style="text-align:left;">
Jun
</td>
<td style="text-align:right;">
2303
</td>
</tr>
<tr>
<td style="text-align:left;">
Jul
</td>
<td style="text-align:right;">
1534
</td>
</tr>
<tr>
<td style="text-align:left;">
Aug
</td>
<td style="text-align:right;">
3535
</td>
</tr>
<tr>
<td style="text-align:left;">
Sep
</td>
<td style="text-align:right;">
2480
</td>
</tr>
<tr>
<td style="text-align:left;">
Oct
</td>
<td style="text-align:right;">
2196
</td>
</tr>
<tr>
<td style="text-align:left;">
Nov
</td>
<td style="text-align:right;">
2497
</td>
</tr>
<tr>
<td style="text-align:left;">
Dec
</td>
<td style="text-align:right;">
1679
</td>
</tr>
</tbody>
</table>
</div>
</div>
</div>
<p>A column plot might make more sense than a line plot for this summary.</p>
<div class="cell" data-layout-align="center">
<div class="sourceCode cell-code" id="cb12"><pre class="sourceCode numberSource r number-lines code-with-copy"><code class="sourceCode r"><span id="cb12-1"><a href="#cb12-1"></a><span class="fu">ggplot</span>(likes_by_month, <span class="fu">aes</span>(<span class="at">x =</span> month, <span class="at">y =</span> total_likes, <span class="at">fill =</span> month)) <span class="sc">+</span></span>
<span id="cb12-2"><a href="#cb12-2"></a>  <span class="fu">geom_col</span>(<span class="at">color =</span> <span class="st">"black"</span>, <span class="at">show.legend =</span> <span class="cn">FALSE</span>) <span class="sc">+</span></span>
<span id="cb12-3"><a href="#cb12-3"></a>  <span class="fu">scale_x_discrete</span>(<span class="at">name =</span> <span class="st">""</span>) <span class="sc">+</span></span>
<span id="cb12-4"><a href="#cb12-4"></a>  <span class="fu">scale_y_continuous</span>(<span class="at">name =</span> <span class="st">"Total Likes per Month"</span>,</span>
<span id="cb12-5"><a href="#cb12-5"></a>                     <span class="at">breaks =</span> <span class="fu">seq</span>(<span class="dv">0</span>, <span class="dv">10000</span>, <span class="dv">1000</span>),</span>
<span id="cb12-6"><a href="#cb12-6"></a>                     <span class="at">labels =</span> <span class="fu">paste0</span>(<span class="dv">0</span><span class="sc">:</span><span class="dv">10</span>, <span class="st">"K"</span>)) <span class="sc">+</span></span>
<span id="cb12-7"><a href="#cb12-7"></a>  <span class="fu">scale_fill_brewer</span>(<span class="at">palette =</span> <span class="st">"Spectral"</span>)</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output cell-output-stderr">
<pre><code>Warning in RColorBrewer::brewer.pal(n, pal): n too large, allowed maximum for palette Spectral is 11
Returning the palette you asked for with that many colors</code></pre>
</div>
<div class="cell-output-display">
<div class="quarto-figure quarto-figure-center">
<figure class="figure"><p><img src="appendix-j-twitter_files/figure-html/likes-by-month-plot-1.png" class="img-fluid figure-img" style="width:100.0%"></p>
<p></p><figcaption class="figure-caption">Likes by month.</figcaption><p></p>
</figure>
</div>
</div>
</div>
<div class="callout-note try callout callout-style-default callout-captioned">
<div class="callout-header d-flex align-content-center">
<div class="callout-icon-container">
<i class="callout-icon"></i>
</div>
<div class="callout-caption-container flex-fill">
Note
</div>
</div>
<div class="callout-body-container callout-body">
<p>How would you change the code in this section to plot the number of tweets published per week?</p>
<p>Hint: if the <code class="package">lubridate</code> function for the month is <code>month()</code>, what is the function for getting the week likely to be?</p>
<div class="cell" data-layout-align="center" data-webex.hide="Summarise Data">
<div class="webex-solution">
<button>
Summarise Data
</button>
<div class="sourceCode cell-code" id="cb14"><pre class="sourceCode numberSource r number-lines code-with-copy"><code class="sourceCode r"><span id="cb14-1"><a href="#cb14-1"></a>tweets_by_week <span class="ot">&lt;-</span> all_daily_tweets <span class="sc">%&gt;%</span></span>
<span id="cb14-2"><a href="#cb14-2"></a>  <span class="fu">mutate</span>(<span class="at">week =</span> <span class="fu">week</span>(Date)) <span class="sc">%&gt;%</span></span>
<span id="cb14-3"><a href="#cb14-3"></a>  <span class="fu">group_by</span>(week) <span class="sc">%&gt;%</span></span>
<span id="cb14-4"><a href="#cb14-4"></a>  <span class="fu">summarise</span>(<span class="at">start_date =</span> <span class="fu">min</span>(Date),</span>
<span id="cb14-5"><a href="#cb14-5"></a>            <span class="at">total_tweets =</span> <span class="fu">sum</span>(<span class="st">`</span><span class="at">Tweets published</span><span class="st">`</span>)) <span class="sc">%&gt;%</span></span>
<span id="cb14-6"><a href="#cb14-6"></a>  <span class="fu">ungroup</span>()</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
</div>
</div>
<div class="cell" data-layout-align="center" data-webex.hide="Plot Data">
<div class="webex-solution">
<button>
Plot Data
</button>
<div class="sourceCode cell-code" id="cb15"><pre class="sourceCode numberSource r number-lines code-with-copy"><code class="sourceCode r"><span id="cb15-1"><a href="#cb15-1"></a><span class="fu">ggplot</span>(tweets_by_week, <span class="fu">aes</span>(<span class="at">x =</span> start_date, <span class="at">y =</span> total_tweets)) <span class="sc">+</span></span>
<span id="cb15-2"><a href="#cb15-2"></a>  <span class="fu">geom_col</span>(<span class="at">fill =</span> <span class="st">"hotpink"</span>) <span class="sc">+</span></span>
<span id="cb15-3"><a href="#cb15-3"></a>  <span class="fu">scale_x_date</span>(<span class="at">name =</span> <span class="st">""</span>,</span>
<span id="cb15-4"><a href="#cb15-4"></a>               <span class="at">date_breaks =</span> <span class="st">"1 month"</span>, </span>
<span id="cb15-5"><a href="#cb15-5"></a>               <span class="at">date_labels =</span> <span class="st">"%B"</span>) <span class="sc">+</span></span>
<span id="cb15-6"><a href="#cb15-6"></a>  <span class="fu">scale_y_continuous</span>(<span class="at">name =</span> <span class="st">"Total Tweets per Week"</span>)</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output-display">
<div class="quarto-figure quarto-figure-center">
<figure class="figure"><p><img src="appendix-j-twitter_files/figure-html/unnamed-chunk-9-1.png" class="img-fluid figure-img" style="width:100.0%"></p>
</figure>
</div>
</div>
</div>
</div>
</div>
</div>
</section></section><section id="data-by-tweet" class="level2" data-number="J.3"><h2 data-number="J.3" class="anchored" data-anchor-id="data-by-tweet">
<span class="header-section-number">J.3</span> Data by Tweet</h2>
<p>You can also download your twitter data by tweet instead of by day. This usually takes a little longer to download. We can use the same pattern to read and combine all of the tweet data files.</p>
<p>The <code>^</code> at the start of the pattern means that the file name has to start with this. This means it won’t match the “daily_tweet…” files.</p>
<div class="cell" data-layout-align="center">
<div class="sourceCode cell-code" id="cb16"><pre class="sourceCode numberSource r number-lines code-with-copy"><code class="sourceCode r"><span id="cb16-1"><a href="#cb16-1"></a>tweet_files <span class="ot">&lt;-</span> <span class="fu">list.files</span>(</span>
<span id="cb16-2"><a href="#cb16-2"></a>  <span class="at">path =</span> <span class="st">"data/tweets"</span>, </span>
<span id="cb16-3"><a href="#cb16-3"></a>  <span class="at">pattern =</span> <span class="st">"^tweet_activity_metrics"</span>,</span>
<span id="cb16-4"><a href="#cb16-4"></a>  <span class="at">full.names =</span> <span class="cn">TRUE</span></span>
<span id="cb16-5"><a href="#cb16-5"></a>)</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
</div>
<p>First, let’s open only the first file and see if we need to do anything to it.</p>
<div class="cell" data-layout-align="center">
<div class="sourceCode cell-code" id="cb17"><pre class="sourceCode numberSource r number-lines code-with-copy"><code class="sourceCode r"><span id="cb17-1"><a href="#cb17-1"></a>tweets <span class="ot">&lt;-</span> <span class="fu">read_csv</span>(tweet_files[<span class="dv">1</span>])</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
</div>
<p>If you look at the file in the Viewer, you can set that the <code>Tweet id</code> column is using scientific notation (<code>1.355500e+18</code>) instead of the full 18-digit tweet ID, which gives different IDs the same value. We won’t ever want to <em>add</em> ID numbers,so it’s safe to represent these as characters. Set up the map over all the files with the <code>col_types</code> specified, then get rid of all the promoted columns and add <code>month</code> and <code>hour</code> columns (reading the date from the <code>time</code> column in these data).</p>
<div class="cell" data-layout-align="center">
<div class="sourceCode cell-code" id="cb18"><pre class="sourceCode numberSource r number-lines code-with-copy"><code class="sourceCode r"><span id="cb18-1"><a href="#cb18-1"></a>ct <span class="ot">&lt;-</span> <span class="fu">cols</span>(<span class="st">"Tweet id"</span> <span class="ot">=</span> <span class="fu">col_character</span>())</span>
<span id="cb18-2"><a href="#cb18-2"></a>all_tweets <span class="ot">&lt;-</span> <span class="fu">map_df</span>(tweet_files, read_csv, <span class="at">col_types =</span> ct) <span class="sc">%&gt;%</span></span>
<span id="cb18-3"><a href="#cb18-3"></a>  <span class="fu">select</span>(<span class="sc">!</span><span class="fu">starts_with</span>(<span class="st">"promoted"</span>)) <span class="sc">%&gt;%</span></span>
<span id="cb18-4"><a href="#cb18-4"></a>  <span class="fu">mutate</span>(<span class="at">month =</span> lubridate<span class="sc">::</span><span class="fu">month</span>(time, <span class="at">label =</span> <span class="cn">TRUE</span>),</span>
<span id="cb18-5"><a href="#cb18-5"></a>         <span class="at">hour =</span> lubridate<span class="sc">::</span><span class="fu">hour</span>(time))</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
</div>
<section id="impressions-per-tweet" class="level3" data-number="J.3.1"><h3 data-number="J.3.1" class="anchored" data-anchor-id="impressions-per-tweet">
<span class="header-section-number">J.3.1</span> Impressions per Tweet</h3>
<p>Now we can look at the distribution of impressions per tweet for each month.</p>
<div class="cell" data-layout-align="center">
<div class="sourceCode cell-code" id="cb19"><pre class="sourceCode numberSource r number-lines code-with-copy"><code class="sourceCode r"><span id="cb19-1"><a href="#cb19-1"></a><span class="fu">ggplot</span>(all_tweets, <span class="fu">aes</span>(<span class="at">x =</span> month, <span class="at">y =</span> impressions, <span class="at">fill =</span> month)) <span class="sc">+</span></span>
<span id="cb19-2"><a href="#cb19-2"></a>  <span class="fu">geom_violin</span>(<span class="at">show.legend =</span> <span class="cn">FALSE</span>, <span class="at">alpha =</span> <span class="fl">0.8</span>) <span class="sc">+</span></span>
<span id="cb19-3"><a href="#cb19-3"></a>  <span class="fu">scale_fill_brewer</span>(<span class="at">palette =</span> <span class="st">"Spectral"</span>) <span class="sc">+</span></span>
<span id="cb19-4"><a href="#cb19-4"></a>  <span class="fu">scale_x_discrete</span>(<span class="at">name =</span> <span class="st">""</span>) <span class="sc">+</span></span>
<span id="cb19-5"><a href="#cb19-5"></a>  <span class="fu">scale_y_continuous</span>(<span class="at">name =</span> <span class="st">"Impressions per Tweet"</span>,</span>
<span id="cb19-6"><a href="#cb19-6"></a>                     <span class="at">breaks =</span> <span class="fu">c</span>(<span class="dv">0</span>, <span class="dv">10</span><span class="sc">^</span>(<span class="dv">2</span><span class="sc">:</span><span class="dv">7</span>)),</span>
<span id="cb19-7"><a href="#cb19-7"></a>                     <span class="at">labels =</span> <span class="fu">c</span>(<span class="dv">0</span>, <span class="dv">10</span>, <span class="dv">100</span>, <span class="st">"1K"</span>, <span class="st">"10K"</span>, <span class="st">"100K"</span>, <span class="st">"1M"</span>),</span>
<span id="cb19-8"><a href="#cb19-8"></a>                     <span class="at">trans =</span> <span class="st">"pseudo_log"</span>) <span class="sc">+</span></span>
<span id="cb19-9"><a href="#cb19-9"></a>  <span class="fu">ggtitle</span>(<span class="st">"Distribution of Twitter Impressions per Tweet in 2021"</span>)</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output cell-output-stderr">
<pre><code>Warning in RColorBrewer::brewer.pal(n, pal): n too large, allowed maximum for palette Spectral is 11
Returning the palette you asked for with that many colors</code></pre>
</div>
<div class="cell-output-display">
<div class="quarto-figure quarto-figure-center">
<figure class="figure"><p><img src="appendix-j-twitter_files/figure-html/imp-month-plot-1.png" class="img-fluid figure-img" style="width:100.0%"></p>
<p></p><figcaption class="figure-caption">Impressions per tweet per month.</figcaption><p></p>
</figure>
</div>
</div>
</div>
<div class="callout-note try callout callout-style-default callout-captioned">
<div class="callout-header d-flex align-content-center">
<div class="callout-icon-container">
<i class="callout-icon"></i>
</div>
<div class="callout-caption-container flex-fill">
Note
</div>
</div>
<div class="callout-body-container callout-body">
<p>The y-axis has been transformed to “pseudo_log” to show very skewed data more clearly (most tweets get a few hundred impressions, but some a few can get thousands). See what the plot looks like if you change the y-axis transformation.</p>
</div>
</div>
</section><section id="top-tweet" class="level3" data-number="J.3.2"><h3 data-number="J.3.2" class="anchored" data-anchor-id="top-tweet">
<span class="header-section-number">J.3.2</span> Top Tweet</h3>
<p>You can display Lisa’s top tweet for the year.</p>
<div class="cell" data-layout-align="center">
<div class="sourceCode cell-code" id="cb21"><pre class="sourceCode numberSource r number-lines code-with-copy"><code class="sourceCode r"><span id="cb21-1"><a href="#cb21-1"></a>top_tweet <span class="ot">&lt;-</span> all_tweets <span class="sc">%&gt;%</span></span>
<span id="cb21-2"><a href="#cb21-2"></a>  <span class="fu">slice_max</span>(<span class="at">order_by =</span> likes, <span class="at">n =</span> <span class="dv">1</span>)</span>
<span id="cb21-3"><a href="#cb21-3"></a></span>
<span id="cb21-4"><a href="#cb21-4"></a>glue<span class="sc">::</span><span class="fu">glue</span>(<span class="st">"[Top tweet]({top_tweet$`Tweet permalink`}) with {top_tweet$likes} likes:</span></span>
<span id="cb21-5"><a href="#cb21-5"></a></span>
<span id="cb21-6"><a href="#cb21-6"></a><span class="st">---------------------------</span></span>
<span id="cb21-7"><a href="#cb21-7"></a><span class="st">{top_tweet$`Tweet text`}</span></span>
<span id="cb21-8"><a href="#cb21-8"></a><span class="st">---------------------------</span></span>
<span id="cb21-9"><a href="#cb21-9"></a><span class="st">"</span>) <span class="sc">%&gt;%</span> <span class="fu">cat</span>()</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<p><a href="https://twitter.com/LisaDeBruine/status/1423445172092866563">Top tweet</a> with 1190 likes:</p>
<table class="table table-sm table-striped">
<colgroup><col style="width: 38%"></colgroup>
<tbody>
<tr class="odd">
<td>Oh, this was fun! You think of the ten least-related nouns possible. I scored in the 94th percentile.</td>
</tr>
<tr class="even">
<td>https://t.co/FhR4DR38OU</td>
</tr>
</tbody>
</table>
</div>
</section><section id="word-cloud" class="level3" data-number="J.3.3"><h3 data-number="J.3.3" class="anchored" data-anchor-id="word-cloud">
<span class="header-section-number">J.3.3</span> Word Cloud</h3>
<p>Or you can make a word cloud of the top words they tweet about. (You’ll learn how to do this in <a href="10-custom.html#sec-word-clouds"><span>Section&nbsp;10.3.4.5</span></a>).</p>
<div class="cell" data-layout-align="center">
<div class="cell-output-display">
<div class="quarto-figure quarto-figure-center">
<figure class="figure"><p><img src="appendix-j-twitter_files/figure-html/unnamed-chunk-14-1.png" class="img-fluid figure-img" style="width:100.0%"></p>
</figure>
</div>
</div>
</div>
</section><section id="tweets-by-hour" class="level3" data-number="J.3.4"><h3 data-number="J.3.4" class="anchored" data-anchor-id="tweets-by-hour">
<span class="header-section-number">J.3.4</span> Tweets by Hour</h3>
<p>In order to make a plot of tweets by hour, colouring the data by wherther or not the sun is up, we can join data from a table of sunrise and sunset times by day for Glasgow (or <a href="https://www.schoolsobservatory.org/learn/astro/nightsky/sunrs_set" target="_blank">download the table for your region</a>).</p>
<p>The <code>Day</code> column originally read in as a character column, so convert it to a date on import using the <code>col_types</code> argument.</p>
<div class="cell" data-layout-align="center">
<div class="sourceCode cell-code" id="cb22"><pre class="sourceCode numberSource r number-lines code-with-copy"><code class="sourceCode r"><span id="cb22-1"><a href="#cb22-1"></a>sun <span class="ot">&lt;-</span> <span class="fu">read_csv</span>(<span class="st">"data/sunfact2021.csv"</span>, </span>
<span id="cb22-2"><a href="#cb22-2"></a>                <span class="at">col_types =</span> <span class="fu">cols</span>(</span>
<span id="cb22-3"><a href="#cb22-3"></a>                  <span class="at">Day =</span> <span class="fu">col_date</span>(<span class="at">format=</span><span class="st">"%d/%m/%Y"</span>),</span>
<span id="cb22-4"><a href="#cb22-4"></a>                  <span class="at">RiseTime =</span> <span class="fu">col_double</span>(),</span>
<span id="cb22-5"><a href="#cb22-5"></a>                  <span class="at">SetTime =</span> <span class="fu">col_double</span>()</span>
<span id="cb22-6"><a href="#cb22-6"></a>                ))</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
</div>
<p>Create a matching <code>Day</code> column for <code>all_tweets</code>, plus an <code>hour</code> column for plotting (the factor structure starts the day at 8:00), and a <code>tweet_time</code> column for comparing to the <code>RiseTime</code> and <code>SetTime</code> columns, which are decimal hours.</p>
<p>Then join the <code>sun</code> table and create a <code>timeofday</code> column that equals “day” if the sun is up and “night” if the sun has set.</p>
<div class="cell" data-layout-align="center">
<div class="sourceCode cell-code" id="cb23"><pre class="sourceCode numberSource r number-lines code-with-copy"><code class="sourceCode r"><span id="cb23-1"><a href="#cb23-1"></a>sun_tweets <span class="ot">&lt;-</span> all_tweets <span class="sc">%&gt;%</span></span>
<span id="cb23-2"><a href="#cb23-2"></a>  <span class="fu">select</span>(time) <span class="sc">%&gt;%</span></span>
<span id="cb23-3"><a href="#cb23-3"></a>  <span class="fu">mutate</span>(<span class="at">Day =</span> <span class="fu">date</span>(time),</span>
<span id="cb23-4"><a href="#cb23-4"></a>         <span class="at">hour =</span> <span class="fu">factor</span>(<span class="fu">hour</span>(time), </span>
<span id="cb23-5"><a href="#cb23-5"></a>                       <span class="at">levels =</span> <span class="fu">c</span>(<span class="dv">8</span><span class="sc">:</span><span class="dv">23</span>, <span class="dv">0</span><span class="sc">:</span><span class="dv">7</span>)),</span>
<span id="cb23-6"><a href="#cb23-6"></a>         <span class="at">tweet_time =</span> <span class="fu">hour</span>(time) <span class="sc">+</span> <span class="fu">minute</span>(time)<span class="sc">/</span><span class="dv">60</span>) <span class="sc">%&gt;%</span></span>
<span id="cb23-7"><a href="#cb23-7"></a>  <span class="fu">left_join</span>(sun, <span class="at">by =</span> <span class="st">"Day"</span>) <span class="sc">%&gt;%</span></span>
<span id="cb23-8"><a href="#cb23-8"></a>  <span class="fu">mutate</span>(<span class="at">timeofday =</span> <span class="fu">ifelse</span>(tweet_time<span class="sc">&gt;</span>RiseTime <span class="sc">&amp;</span> </span>
<span id="cb23-9"><a href="#cb23-9"></a>                            tweet_time<span class="sc">&lt;</span>SetTime, </span>
<span id="cb23-10"><a href="#cb23-10"></a>                            <span class="at">yes =</span> <span class="st">"day"</span>, </span>
<span id="cb23-11"><a href="#cb23-11"></a>                            <span class="at">no =</span> <span class="st">"night"</span>))</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
</div>
<p>Check a few random rows to make sure you did everything correctly.</p>
<div class="cell" data-layout-align="center">
<div class="sourceCode cell-code" id="cb24"><pre class="sourceCode numberSource r number-lines code-with-copy"><code class="sourceCode r"><span id="cb24-1"><a href="#cb24-1"></a><span class="fu">slice_sample</span>(sun_tweets, <span class="at">n =</span> <span class="dv">10</span>)</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output-display">
<div class="kable-table">

<table>
<thead><tr>
<th style="text-align:left;">
time
</th>
<th style="text-align:left;">
Day
</th>
<th style="text-align:left;">
hour
</th>
<th style="text-align:right;">
tweet_time
</th>
<th style="text-align:right;">
RiseTime
</th>
<th style="text-align:right;">
SetTime
</th>
<th style="text-align:left;">
timeofday
</th>
</tr></thead>
<tbody>
<tr>
<td style="text-align:left;">
2021-08-31 15:27:00
</td>
<td style="text-align:left;">
2021-08-31
</td>
<td style="text-align:left;">
15
</td>
<td style="text-align:right;">
15.450000
</td>
<td style="text-align:right;">
5.327
</td>
<td style="text-align:right;">
19.192
</td>
<td style="text-align:left;">
day
</td>
</tr>
<tr>
<td style="text-align:left;">
2021-08-05 10:57:00
</td>
<td style="text-align:left;">
2021-08-05
</td>
<td style="text-align:left;">
10
</td>
<td style="text-align:right;">
10.950000
</td>
<td style="text-align:right;">
4.501
</td>
<td style="text-align:right;">
20.209
</td>
<td style="text-align:left;">
day
</td>
</tr>
<tr>
<td style="text-align:left;">
2021-09-13 16:21:00
</td>
<td style="text-align:left;">
2021-09-13
</td>
<td style="text-align:left;">
16
</td>
<td style="text-align:right;">
16.350000
</td>
<td style="text-align:right;">
5.740
</td>
<td style="text-align:right;">
18.633
</td>
<td style="text-align:left;">
day
</td>
</tr>
<tr>
<td style="text-align:left;">
2021-06-30 09:37:00
</td>
<td style="text-align:left;">
2021-06-30
</td>
<td style="text-align:left;">
9
</td>
<td style="text-align:right;">
9.616667
</td>
<td style="text-align:right;">
3.624
</td>
<td style="text-align:right;">
21.026
</td>
<td style="text-align:left;">
day
</td>
</tr>
<tr>
<td style="text-align:left;">
2021-08-27 12:48:00
</td>
<td style="text-align:left;">
2021-08-27
</td>
<td style="text-align:left;">
12
</td>
<td style="text-align:right;">
12.800000
</td>
<td style="text-align:right;">
5.200
</td>
<td style="text-align:right;">
19.359
</td>
<td style="text-align:left;">
day
</td>
</tr>
<tr>
<td style="text-align:left;">
2021-10-16 11:29:00
</td>
<td style="text-align:left;">
2021-10-16
</td>
<td style="text-align:left;">
11
</td>
<td style="text-align:right;">
11.483333
</td>
<td style="text-align:right;">
6.811
</td>
<td style="text-align:right;">
17.222
</td>
<td style="text-align:left;">
day
</td>
</tr>
<tr>
<td style="text-align:left;">
2021-01-10 12:06:00
</td>
<td style="text-align:left;">
2021-01-10
</td>
<td style="text-align:left;">
12
</td>
<td style="text-align:right;">
12.100000
</td>
<td style="text-align:right;">
8.651
</td>
<td style="text-align:right;">
16.142
</td>
<td style="text-align:left;">
day
</td>
</tr>
<tr>
<td style="text-align:left;">
2021-02-14 19:22:00
</td>
<td style="text-align:left;">
2021-02-14
</td>
<td style="text-align:left;">
19
</td>
<td style="text-align:right;">
19.366667
</td>
<td style="text-align:right;">
7.695
</td>
<td style="text-align:right;">
17.324
</td>
<td style="text-align:left;">
night
</td>
</tr>
<tr>
<td style="text-align:left;">
2021-08-28 13:09:00
</td>
<td style="text-align:left;">
2021-08-28
</td>
<td style="text-align:left;">
13
</td>
<td style="text-align:right;">
13.150000
</td>
<td style="text-align:right;">
5.232
</td>
<td style="text-align:right;">
19.318
</td>
<td style="text-align:left;">
day
</td>
</tr>
<tr>
<td style="text-align:left;">
2021-10-04 12:01:00
</td>
<td style="text-align:left;">
2021-10-04
</td>
<td style="text-align:left;">
12
</td>
<td style="text-align:right;">
12.016667
</td>
<td style="text-align:right;">
6.413
</td>
<td style="text-align:right;">
17.723
</td>
<td style="text-align:left;">
day
</td>
</tr>
</tbody>
</table>
</div>
</div>
</div>
<p>Plot the <code>hour</code> along the x-axis and set the fill and colour by <code>timeofday</code>. Use <code>scale_*_manual()</code> functions to set custom colours for day and night.</p>
<div class="cell" data-layout-align="center">
<div class="sourceCode cell-code" id="cb25"><pre class="sourceCode numberSource r number-lines code-with-copy"><code class="sourceCode r"><span id="cb25-1"><a href="#cb25-1"></a>map <span class="ot">&lt;-</span> <span class="fu">aes</span>(<span class="at">x =</span> hour, </span>
<span id="cb25-2"><a href="#cb25-2"></a>           <span class="at">fill =</span> timeofday, </span>
<span id="cb25-3"><a href="#cb25-3"></a>           <span class="at">colour =</span> timeofday)</span>
<span id="cb25-4"><a href="#cb25-4"></a></span>
<span id="cb25-5"><a href="#cb25-5"></a><span class="fu">ggplot</span>(sun_tweets, <span class="at">mapping =</span> map) <span class="sc">+</span></span>
<span id="cb25-6"><a href="#cb25-6"></a>  <span class="fu">geom_bar</span>(<span class="at">show.legend =</span> <span class="cn">FALSE</span>) <span class="sc">+</span></span>
<span id="cb25-7"><a href="#cb25-7"></a>  <span class="fu">labs</span>(<span class="at">x =</span> <span class="st">""</span>, </span>
<span id="cb25-8"><a href="#cb25-8"></a>       <span class="at">y =</span> <span class="st">""</span>,</span>
<span id="cb25-9"><a href="#cb25-9"></a>       <span class="at">title =</span> <span class="st">"Number of tweets by hour of the day"</span>) <span class="sc">+</span></span>
<span id="cb25-10"><a href="#cb25-10"></a>  <span class="fu">scale_x_discrete</span>(<span class="at">breaks =</span> <span class="fu">c</span>(<span class="dv">8</span><span class="sc">:</span><span class="dv">23</span>, <span class="dv">0</span><span class="sc">:</span><span class="dv">7</span>)[<span class="fu">c</span>(T, F, F, F)],</span>
<span id="cb25-11"><a href="#cb25-11"></a>                   <span class="at">drop =</span> <span class="cn">FALSE</span>) <span class="sc">+</span></span>
<span id="cb25-12"><a href="#cb25-12"></a>  <span class="fu">scale_y_continuous</span>(<span class="at">expand =</span> <span class="fu">c</span>(<span class="dv">0</span>, <span class="dv">0</span>, .<span class="dv">1</span>, <span class="dv">0</span>)) <span class="sc">+</span></span>
<span id="cb25-13"><a href="#cb25-13"></a>  <span class="fu">scale_fill_manual</span>(<span class="at">values =</span> <span class="fu">c</span>(<span class="st">"gold"</span>, <span class="st">"midnightblue"</span>)) <span class="sc">+</span></span>
<span id="cb25-14"><a href="#cb25-14"></a>  <span class="fu">scale_colour_manual</span>(<span class="at">values =</span> <span class="fu">c</span>(<span class="st">"darkgoldenrod1"</span>, <span class="st">"black"</span>)) <span class="sc">+</span></span>
<span id="cb25-15"><a href="#cb25-15"></a>  <span class="fu">facet_wrap</span>(<span class="sc">~</span><span class="fu">month</span>(time, <span class="at">label =</span> <span class="cn">TRUE</span>, <span class="at">abbr =</span> <span class="cn">FALSE</span>), <span class="at">nrow =</span> <span class="dv">3</span>) <span class="sc">+</span></span>
<span id="cb25-16"><a href="#cb25-16"></a>  <span class="fu">theme</span>(<span class="at">strip.background =</span> <span class="fu">element_rect</span>(<span class="at">fill =</span> <span class="st">"white"</span>, </span>
<span id="cb25-17"><a href="#cb25-17"></a>                                        <span class="at">color =</span> <span class="st">"transparent"</span>),</span>
<span id="cb25-18"><a href="#cb25-18"></a>        <span class="at">panel.grid =</span> <span class="fu">element_blank</span>())</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output-display">
<div class="quarto-figure quarto-figure-center">
<figure class="figure"><p><img src="appendix-j-twitter_files/figure-html/hour-tweet-plot-1.png" class="img-fluid figure-img" style="width:100.0%"></p>
<p></p><figcaption class="figure-caption">Tweets per hour of the day</figcaption><p></p>
</figure>
</div>
</div>
</div>
<div class="callout-note try callout callout-style-default callout-captioned">
<div class="callout-header d-flex align-content-center">
<div class="callout-icon-container">
<i class="callout-icon"></i>
</div>
<div class="callout-caption-container flex-fill">
Note
</div>
</div>
<div class="callout-body-container callout-body">
<p>Go through each line of the plot above and work out what each function and argument does by changing or removing it.</p>
</div>
</div>


</section></section></main><!-- /main --><script>

/* update total correct if #webex-total_correct exists */
update_total_correct = function() {
  console.log("webex: update total_correct");

  if (t = document.getElementById("webex-total_correct")) {
    var correct = document.getElementsByClassName("webex-correct").length;
    var solvemes = document.getElementsByClassName("webex-solveme").length;
    var radiogroups = document.getElementsByClassName("webex-radiogroup").length;
    var selects = document.getElementsByClassName("webex-select").length;

    t.innerHTML = correct + " of " + (solvemes + radiogroups + selects) + " correct";
  }
}

/* webex-solution button toggling function */
b_func = function() {
  console.log("webex: toggle hide");

  var cl = this.parentElement.classList;
  if (cl.contains('open')) {
    cl.remove("open");
  } else {
    cl.add("open");
  }
}

/* function for checking solveme answers */
solveme_func = function(e) {
  console.log("webex: check solveme");

  var real_answers = JSON.parse(this.dataset.answer);
  var my_answer = this.value;
  var cl = this.classList;
  if (cl.contains("ignorecase")) {
    my_answer = my_answer.toLowerCase();
  }
  if (cl.contains("nospaces")) {
    my_answer = my_answer.replace(/ /g, "")
  }

  if (my_answer == "") {
    cl.remove("webex-correct");
    cl.remove("webex-incorrect");
  } else if (real_answers.includes(my_answer)) {
    cl.add("webex-correct");
    cl.remove("webex-incorrect");
  } else {
    cl.add("webex-incorrect");
    cl.remove("webex-correct");
  }

  // match numeric answers within a specified tolerance
  if(this.dataset.tol > 0){
    var tol = JSON.parse(this.dataset.tol);
    var matches = real_answers.map(x => Math.abs(x - my_answer) < tol)
    if (matches.reduce((a, b) => a + b, 0) > 0) {
      cl.add("webex-correct");
    } else {
      cl.remove("webex-correct");
    }
  }

  // added regex bit
  if (cl.contains("regex")){
    answer_regex = RegExp(real_answers.join("|"))
    if (answer_regex.test(my_answer)) {
      cl.add("webex-correct");
    }
  }

  update_total_correct();
}

/* function for checking select answers */
select_func = function(e) {
  console.log("webex: check select");

  var cl = this.classList

  /* add style */
  cl.remove("webex-incorrect");
  cl.remove("webex-correct");
  if (this.value == "answer") {
    cl.add("webex-correct");
  } else if (this.value != "blank") {
    cl.add("webex-incorrect");
  }

  update_total_correct();
}

/* function for checking radiogroups answers */
radiogroups_func = function(e) {
  console.log("webex: check radiogroups");

  var checked_button = document.querySelector('input[name=' + this.id + ']:checked');
  var cl = checked_button.parentElement.classList;
  var labels = checked_button.parentElement.parentElement.children;

  /* get rid of styles */
  for (i = 0; i < labels.length; i++) {
    labels[i].classList.remove("webex-incorrect");
    labels[i].classList.remove("webex-correct");
  }

  /* add style */
  if (checked_button.value == "answer") {
    cl.add("webex-correct");
  } else {
    cl.add("webex-incorrect");
  }

  update_total_correct();
}

window.onload = function() {
  console.log("webex onload");
  /* set up solution buttons */
  var buttons = document.getElementsByTagName("button");

  for (var i = 0; i < buttons.length; i++) {
    if (buttons[i].parentElement.classList.contains('webex-solution')) {
      buttons[i].onclick = b_func;
    }
  }

  /* set up webex-solveme inputs */
  var solveme = document.getElementsByClassName("webex-solveme");

  for (var i = 0; i < solveme.length; i++) {
    /* make sure input boxes don't auto-anything */
    solveme[i].setAttribute("autocomplete","off");
    solveme[i].setAttribute("autocorrect", "off");
    solveme[i].setAttribute("autocapitalize", "off");
    solveme[i].setAttribute("spellcheck", "false");
    solveme[i].value = "";

    /* adjust answer for ignorecase or nospaces */
    var cl = solveme[i].classList;
    var real_answer = solveme[i].dataset.answer;
    if (cl.contains("ignorecase")) {
      real_answer = real_answer.toLowerCase();
    }
    if (cl.contains("nospaces")) {
      real_answer = real_answer.replace(/ /g, "");
    }
    solveme[i].dataset.answer = real_answer;

    /* attach checking function */
    solveme[i].onkeyup = solveme_func;
    solveme[i].onchange = solveme_func;

    $(solveme[i]).after(" <span class='webex-icon'></span>");
  }

  /* set up radiogroups */
  var radiogroups = document.getElementsByClassName("webex-radiogroup");
  for (var i = 0; i < radiogroups.length; i++) {
    radiogroups[i].onchange = radiogroups_func;
  }

  /* set up selects */
  var selects = document.getElementsByClassName("webex-select");
  for (var i = 0; i < selects.length; i++) {
    selects[i].onchange = select_func;
    $(selects[i]).after(" <span class='webex-icon'></span>");
  }

  update_total_correct();
}

</script><script>
$( document ).ready(function() {
  var cite = ' ';
  var psyteachr = ' <a href="https://psyteachr.github.io/"><img src="images/logos/psyteachr_logo.png" style="height: 31px; color: white;" alt="psyTeachR: Reproducible Research" /></a>';
  var license = ' <a rel="license" href="https://creativecommons.org/licenses/by-sa/4.0/" target="blank"><img alt="Creative Commons License" style="border-width:0" src="https://i.creativecommons.org/l/by-sa/4.0/88x31.png"></a>';

  $("footer div.row div:eq(1) p").html(
    psyteachr + license + cite
  );

  function move_sidebar() {
    var w = window.innerWidth;
    if (w < 992) {
      $("#toc").appendTo($("#main-nav"));
    } else {
      $("#toc").appendTo($("div.sidebar-chapter"));
    }
  }
  move_sidebar();
  window.onresize = move_sidebar;
});
</script><script id="quarto-html-after-body" type="application/javascript">
window.document.addEventListener("DOMContentLoaded", function (event) {
  const toggleBodyColorMode = (bsSheetEl) => {
    const mode = bsSheetEl.getAttribute("data-mode");
    const bodyEl = window.document.querySelector("body");
    if (mode === "dark") {
      bodyEl.classList.add("quarto-dark");
      bodyEl.classList.remove("quarto-light");
    } else {
      bodyEl.classList.add("quarto-light");
      bodyEl.classList.remove("quarto-dark");
    }
  }
  const toggleBodyColorPrimary = () => {
    const bsSheetEl = window.document.querySelector("link#quarto-bootstrap");
    if (bsSheetEl) {
      toggleBodyColorMode(bsSheetEl);
    }
  }
  toggleBodyColorPrimary();  
  const disableStylesheet = (stylesheets) => {
    for (let i=0; i < stylesheets.length; i++) {
      const stylesheet = stylesheets[i];
      stylesheet.rel = 'prefetch';
    }
  }
  const enableStylesheet = (stylesheets) => {
    for (let i=0; i < stylesheets.length; i++) {
      const stylesheet = stylesheets[i];
      stylesheet.rel = 'stylesheet';
    }
  }
  const manageTransitions = (selector, allowTransitions) => {
    const els = window.document.querySelectorAll(selector);
    for (let i=0; i < els.length; i++) {
      const el = els[i];
      if (allowTransitions) {
        el.classList.remove('notransition');
      } else {
        el.classList.add('notransition');
      }
    }
  }
  const toggleColorMode = (alternate) => {
    // Switch the stylesheets
    const alternateStylesheets = window.document.querySelectorAll('link.quarto-color-scheme.quarto-color-alternate');
    manageTransitions('#quarto-margin-sidebar .nav-link', false);
    if (alternate) {
      enableStylesheet(alternateStylesheets);
      for (const sheetNode of alternateStylesheets) {
        if (sheetNode.id === "quarto-bootstrap") {
          toggleBodyColorMode(sheetNode);
        }
      }
    } else {
      disableStylesheet(alternateStylesheets);
      toggleBodyColorPrimary();
    }
    manageTransitions('#quarto-margin-sidebar .nav-link', true);
    // Switch the toggles
    const toggles = window.document.querySelectorAll('.quarto-color-scheme-toggle');
    for (let i=0; i < toggles.length; i++) {
      const toggle = toggles[i];
      if (toggle) {
        if (alternate) {
          toggle.classList.add("alternate");     
        } else {
          toggle.classList.remove("alternate");
        }
      }
    }
    // Hack to workaround the fact that safari doesn't
    // properly recolor the scrollbar when toggling (#1455)
    if (navigator.userAgent.indexOf('Safari') > 0 && navigator.userAgent.indexOf('Chrome') == -1) {
      manageTransitions("body", false);
      window.scrollTo(0, 1);
      setTimeout(() => {
        window.scrollTo(0, 0);
        manageTransitions("body", true);
      }, 40);  
    }
  }
  const isFileUrl = () => { 
    return window.location.protocol === 'file:';
  }
  const hasAlternateSentinel = () => {  
    let styleSentinel = getColorSchemeSentinel();
    if (styleSentinel !== null) {
      return styleSentinel === "alternate";
    } else {
      return false;
    }
  }
  const setStyleSentinel = (alternate) => {
    const value = alternate ? "alternate" : "default";
    if (!isFileUrl()) {
      window.localStorage.setItem("quarto-color-scheme", value);
    } else {
      localAlternateSentinel = value;
    }
  }
  const getColorSchemeSentinel = () => {
    if (!isFileUrl()) {
      const storageValue = window.localStorage.getItem("quarto-color-scheme");
      return storageValue != null ? storageValue : localAlternateSentinel;
    } else {
      return localAlternateSentinel;
    }
  }
  let localAlternateSentinel = 'default';
  // Dark / light mode switch
  window.quartoToggleColorScheme = () => {
    // Read the current dark / light value 
    let toAlternate = !hasAlternateSentinel();
    toggleColorMode(toAlternate);
    setStyleSentinel(toAlternate);
  };
  // Ensure there is a toggle, if there isn't float one in the top right
  if (window.document.querySelector('.quarto-color-scheme-toggle') === null) {
    const a = window.document.createElement('a');
    a.classList.add('top-right');
    a.classList.add('quarto-color-scheme-toggle');
    a.href = "";
    a.onclick = function() { try { window.quartoToggleColorScheme(); } catch {} return false; };
    const i = window.document.createElement("i");
    i.classList.add('bi');
    a.appendChild(i);
    window.document.body.appendChild(a);
  }
  // Switch to dark mode if need be
  if (hasAlternateSentinel()) {
    toggleColorMode(true);
  } 
  const icon = "";
  const anchorJS = new window.AnchorJS();
  anchorJS.options = {
    placement: 'right',
    icon: icon
  };
  anchorJS.add('.anchored');
  const clipboard = new window.ClipboardJS('.code-copy-button', {
    target: function(trigger) {
      return trigger.previousElementSibling;
    }
  });
  clipboard.on('success', function(e) {
    // button target
    const button = e.trigger;
    // don't keep focus
    button.blur();
    // flash "checked"
    button.classList.add('code-copy-button-checked');
    var currentTitle = button.getAttribute("title");
    button.setAttribute("title", "Copied!");
    setTimeout(function() {
      button.setAttribute("title", currentTitle);
      button.classList.remove('code-copy-button-checked');
    }, 1000);
    // clear code selection
    e.clearSelection();
  });
  function tippyHover(el, contentFn) {
    const config = {
      allowHTML: true,
      content: contentFn,
      maxWidth: 500,
      delay: 100,
      arrow: false,
      appendTo: function(el) {
          return el.parentElement;
      },
      interactive: true,
      interactiveBorder: 10,
      theme: 'quarto',
      placement: 'bottom-start'
    };
    window.tippy(el, config); 
  }
  const noterefs = window.document.querySelectorAll('a[role="doc-noteref"]');
  for (var i=0; i<noterefs.length; i++) {
    const ref = noterefs[i];
    tippyHover(ref, function() {
      // use id or data attribute instead here
      let href = ref.getAttribute('data-footnote-href') || ref.getAttribute('href');
      try { href = new URL(href).hash; } catch {}
      const id = href.replace(/^#\/?/, "");
      const note = window.document.getElementById(id);
      return note.innerHTML;
    });
  }
  var bibliorefs = window.document.querySelectorAll('a[role="doc-biblioref"]');
  for (var i=0; i<bibliorefs.length; i++) {
    const ref = bibliorefs[i];
    const cites = ref.parentNode.getAttribute('data-cites').split(' ');
    tippyHover(ref, function() {
      var popup = window.document.createElement('div');
      cites.forEach(function(cite) {
        var citeDiv = window.document.createElement('div');
        citeDiv.classList.add('hanging-indent');
        citeDiv.classList.add('csl-entry');
        var biblioDiv = window.document.getElementById('ref-' + cite);
        if (biblioDiv) {
          citeDiv.innerHTML = biblioDiv.innerHTML;
        }
        popup.appendChild(citeDiv);
      });
      return popup.innerHTML;
    });
  }
});
</script><nav class="page-navigation"><div class="nav-page nav-page-previous">
      <a href="./appendix-i-hashtags.html" class="pagination-link">
        <i class="bi bi-arrow-left-short"></i> <span class="nav-page-text"><span class="chapter-number">I</span>&nbsp; <span class="chapter-title">Twitter Hashtags</span></span>
      </a>          
  </div>
  <div class="nav-page nav-page-next">
      <a href="./appendix-k-spotify.html" class="pagination-link">
        <span class="nav-page-text"><span class="chapter-number">K</span>&nbsp; <span class="chapter-title">Spotify Data</span></span> <i class="bi bi-arrow-right-short"></i>
      </a>
  </div>
</nav>
</div> <!-- /content -->
<footer class="footer"><div class="nav-footer">
    <div class="nav-footer-left">CC-BY 2022, psyTeachR</div>   
    <div class="nav-footer-right">
      <ul class="footer-items list-unstyled">
<li class="nav-item compact">
    <a class="nav-link" href="https://github.com/psyteachr/ads-v2">
      <i class="bi bi-github" role="img">
</i> 
    </a>
  </li>  
    <li class="nav-item compact">
    <a class="nav-link" href="https://twitter.com/psyteachr">
      <i class="bi bi-twitter" role="img">
</i> 
    </a>
  </li>  
    <li class="nav-item compact">
    <a class="nav-link" href="https://doi.org/10.5281/zenodo.6365077">
      <i class="bi bi-https://zenodo.org/badge/DOI/10.5281/zenodo.6365077.svg" role="img">
</i> 
    </a>
  </li>  
</ul>
</div>
  </div>
</footer>


</body></html>